name: 'Infrastructure_Resources_Provisioning'
on:
  push:
    branches:
      - feature
      #- master
  pull_request:
    types: [closed]
    branches:
        - master
jobs:
  ProvisionSharedResources: 
    runs-on: ubuntu-latest
    strategy: 
      matrix: 
        environment: ["infra"]
        resources: ["vpc_setup"]     
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 100
      - name: Check_For_Changes
        uses: marceloprado/has-changed-path@v1
        id: changed-front
        with:
          paths: ./.github/workflows
      - name: List o/p 
        run: ls -al
      - name: Print Curent Branch name
        if: steps.changed-front.outputs.changed == 'true' 
        run: | 
          echo "This is running on branch ${GITHUB_REF##*/}"
      - name: Test if condition
        if: steps.changed-front.outputs.changed == 'true' && github.ref == 'master' && github.event.pull_request.merged == true
        run: |
          echo "if condition worked"
            echo "running on branch ${GITHUB_REF##*/}"
        
